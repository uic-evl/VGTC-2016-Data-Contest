<!DOCTYPE html>
<meta charset="utf-8">
<style>
    .land {
        fill: #222;
    }
    
    .county-boundary {
        fill: none;
        stroke: #fff;
        stroke-width: .5px;
    }
    
    .state-boundary {
        fill: none;
        stroke: #fff;
    }
    
    .state-boundary {
        fill: none;
    }
</style>

<body>
    <script src="https://d3js.org/d3.v3.min.js"></script>
    <script src="https://d3js.org/topojson.v1.min.js"></script>
    <script>
        var width = 400,
            height = 200;

        var maxExpense = 3966889.724;

        var projection = d3.geo.albersUsa()
            .scale(450)
            .translate([width / 2, height / 2]);

        var path = d3.geo.path()
            .projection(projection);

        d3.select("body").append("h1")
            .text("Expense Overview (2012-2015)");


        var map_expense_2012 = d3.select("body").append("svg")
            .attr("width", width)
            .attr("height", height)
            .append("g");

        var map_expense_2013 = d3.select("body").append("svg")
            .attr("width", width)
            .attr("height", height)
            .append("g");

        var map_expense_2014 = d3.select("body").append("svg")
            .attr("width", width)
            .attr("height", height)
            .append("g");

        var map_expense_2015 = d3.select("body").append("svg")
            .attr("width", width)
            .attr("height", height)
            .append("g");




        d3.json("../../data/topo-us-expenses.json", function(error, us) {
            if (error) throw error;

            var expenseColorScale = d3.scale.linear()
                .domain([0, maxExpense])
                .range(['#bae4b3', '#238b45']);

            map_expense_2012.insert("path", ".graticule")
                .datum(topojson.feature(us, us.objects.land))
                .attr("class", "land")
                .attr("d", path);

            map_expense_2012.append("g")
                .attr("id", "states")
                .selectAll("path")
                .data(topojson.feature(us, us.objects.states).features)
                .enter().append("path")
                .attr("d", path)
                .style("fill", function(d) {
                    return expenseColorScale(d.properties.exp_2012)
                });


            map_expense_2012.insert("path", ".graticule")
                .datum(topojson.mesh(us, us.objects.states, function(a, b) {
                    return a !== b;
                }))
                .attr("class", "state-boundary")
                .attr("d", path);




            map_expense_2013.insert("path", ".graticule")
                .datum(topojson.feature(us, us.objects.land))
                .attr("class", "land")
                .attr("d", path);

            map_expense_2013.append("g")
                .attr("id", "states")
                .selectAll("path")
                .data(topojson.feature(us, us.objects.states).features)
                .enter().append("path")
                .attr("d", path)
                .style("fill", function(d) {
                    return expenseColorScale(d.properties.exp_2013)
                });


            map_expense_2013.insert("path", ".graticule")
                .datum(topojson.mesh(us, us.objects.states, function(a, b) {
                    return a !== b;
                }))
                .attr("class", "state-boundary")
                .attr("d", path);



            map_expense_2014.insert("path", ".graticule")
                .datum(topojson.feature(us, us.objects.land))
                .attr("class", "land")
                .attr("d", path);

            map_expense_2014.append("g")
                .attr("id", "states")
                .selectAll("path")
                .data(topojson.feature(us, us.objects.states).features)
                .enter().append("path")
                .attr("d", path)
                .style("fill", function(d) {
                    return expenseColorScale(d.properties.exp_2014)
                });

            map_expense_2014.insert("path", ".graticule")
                .datum(topojson.mesh(us, us.objects.states, function(a, b) {
                    return a !== b;
                }))
                .attr("class", "state-boundary")
                .attr("d", path);



            map_expense_2015.insert("path", ".graticule")
                .datum(topojson.feature(us, us.objects.land))
                .attr("class", "land")
                .attr("d", path);

            map_expense_2015.append("g")
                .attr("id", "states")
                .selectAll("path")
                .data(topojson.feature(us, us.objects.states).features)
                .enter().append("path")
                .attr("d", path)
                .style("fill", function(d) {
                    return expenseColorScale(d.properties.exp_2015)
                });


            map_expense_2015.insert("path", ".graticule")
                .datum(topojson.mesh(us, us.objects.states, function(a, b) {
                    return a !== b;
                }))
                .attr("class", "state-boundary")
                .attr("d", path);
        });


        d3.select("body").append("h1")
            .text("Utilization Overview (2012-2015) Need data!");
        var map_utilization_2012 = d3.select("body").append("svg")
            .attr("width", width)
            .attr("height", height)
            .append("g");

        var map_utilization_2013 = d3.select("body").append("svg")
            .attr("width", width)
            .attr("height", height)
            .append("g");

        var map_utilization_2014 = d3.select("body").append("svg")
            .attr("width", width)
            .attr("height", height)
            .append("g");

        var map_utilization_2015 = d3.select("body").append("svg")
            .attr("width", width)
            .attr("height", height)
            .append("g");

        d3.json("../../data/topo-us-expenses.json", function(error, us) {
            if (error) throw error;

            var utilizationColorScale = d3.scale.linear()
                .domain([0, maxExpense])
                .range(['#cbc9e2', '#6a51a3']);

            map_utilization_2012.insert("path", ".graticule")
                .datum(topojson.feature(us, us.objects.land))
                .attr("class", "land")
                .attr("d", path);

            map_utilization_2012.append("g")
                .attr("id", "states")
                .selectAll("path")
                .data(topojson.feature(us, us.objects.states).features)
                .enter().append("path")
                .attr("d", path)
                .style("fill", function(d) {
                    return utilizationColorScale(d.properties.exp_2012)
                });


            map_utilization_2012.insert("path", ".graticule")
                .datum(topojson.mesh(us, us.objects.states, function(a, b) {
                    return a !== b;
                }))
                .attr("class", "state-boundary")
                .attr("d", path);




            map_utilization_2013.insert("path", ".graticule")
                .datum(topojson.feature(us, us.objects.land))
                .attr("class", "land")
                .attr("d", path);

            map_utilization_2013.append("g")
                .attr("id", "states")
                .selectAll("path")
                .data(topojson.feature(us, us.objects.states).features)
                .enter().append("path")
                .attr("d", path)
                .style("fill", function(d) {
                    return utilizationColorScale(d.properties.exp_2013)
                });


            map_utilization_2013.insert("path", ".graticule")
                .datum(topojson.mesh(us, us.objects.states, function(a, b) {
                    return a !== b;
                }))
                .attr("class", "state-boundary")
                .attr("d", path);



            map_utilization_2014.insert("path", ".graticule")
                .datum(topojson.feature(us, us.objects.land))
                .attr("class", "land")
                .attr("d", path);

            map_utilization_2014.append("g")
                .attr("id", "states")
                .selectAll("path")
                .data(topojson.feature(us, us.objects.states).features)
                .enter().append("path")
                .attr("d", path)
                .style("fill", function(d) {
                    return utilizationColorScale(d.properties.exp_2014)
                });

            map_utilization_2014.insert("path", ".graticule")
                .datum(topojson.mesh(us, us.objects.states, function(a, b) {
                    return a !== b;
                }))
                .attr("class", "state-boundary")
                .attr("d", path);



            map_utilization_2015.insert("path", ".graticule")
                .datum(topojson.feature(us, us.objects.land))
                .attr("class", "land")
                .attr("d", path);

            map_utilization_2015.append("g")
                .attr("id", "states")
                .selectAll("path")
                .data(topojson.feature(us, us.objects.states).features)
                .enter().append("path")
                .attr("d", path)
                .style("fill", function(d) {
                    return utilizationColorScale(d.properties.exp_2015)
                });


            map_utilization_2015.insert("path", ".graticule")
                .datum(topojson.mesh(us, us.objects.states, function(a, b) {
                    return a !== b;
                }))
                .attr("class", "state-boundary")
                .attr("d", path);
        });
    </script>

</body>

</html>